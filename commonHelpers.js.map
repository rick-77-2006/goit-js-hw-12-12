{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n    \nconst galleryEl = document.querySelector('.gallery-o');\nconst formElem = document.querySelector('.search-form');\nconst lightbox = new SimpleLightbox('.gallery-o');\n\n\n\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n};\nexport function renderImages(array) {\n    const markup = array\n        .map(\n        ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n    galleryEl.innerHTML = markup;\n\n    const lightbox = new SimpleLightbox('.gallery-o a', options);\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n    formElem.reset();\n}\n\n\nexport function renderMoreImages(images) {\n    const hitsArray = images['hits'];\n    const markup = hitsArray\n        .map(\n    ({ largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n    galleryEl.insertAdjacentHTML(\"beforeend\", markup);\n    const lightbox = new SimpleLightbox('.gallery-o a', options);\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n    formElem.reset();\n    \n    const height = galleryEl.firstElementChild.getBoundingClientRect().height;\n    scrollBy({\n        behavior: 'smooth',\n        top: height * 2,\n    })\n}\n","import axios from \"axios\";\n\nexport async function getPhotoBySearch(value, currentPage) {\n    try {\n        const KEY = '42424645-ecd3f1048329df1dec069e6a8';\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: KEY,\n                q: value,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page: currentPage,\n                per_page: '15'\n            }\n        });\n\n        if (response.data.total === 0) {\n            throw new Error('No images found');\n        }\n\n    return response.data;\n    } catch (error) {\n        throw error; \n    }\n}\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { renderImages } from './js/render-functions.js';\nimport { getPhotoBySearch } from './js/pixabay-api.js';\nimport { renderMoreImages } from './js/render-functions.js';\n\n\nconst formElem = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery-o');\nconst loaderElem = document.querySelector('.loader');\nconst loaderElem2 = document.querySelector('.loader2');\nconst loadMoreBtn = document.querySelector('.more-btn');\nlet value;\nlet page;\nlet maxPage;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n    hideLoader();\n    \n    formElem.addEventListener('submit', onSubmit);\n\n\n   async function onSubmit(e) {\n    e.preventDefault();\n    showLoader();\n    galleryEl.innerHTML = '';\n    page = 1;\n    value = formElem.querySelector('.input-search').value;\n\n    try {\n        const data = await getPhotoBySearch(value, page);\n        renderImages(data.hits);\n        maxPage = Math.ceil(data.totalHits / 15);\n    \n    } catch (error) {\n        renderError(error);\n        \n    } finally {\n        hideLoader();\n        checkBtnVisibleStatus();\n    }\n        \n    }\n})\n\n    function renderError(error) {\n        galleryEl.innerHTML = '';\n        iziToast.show({\n            message: `❌ \"${error}\". Please try again!`,\n            color: 'red',\n            position: 'topRight',\n            maxWidth: '400px',\n        }); \n    };\n\nfunction showLoader() {\n    loaderElem.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loaderElem.style.display = 'none';\n}\nfunction showLoader2() {\n    loaderElem2.classList.remove('hidden');\n}\n\nfunction hideLoader2() {\n    loaderElem2.classList.add('hidden');\n}\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    page += 1;\n    showLoader2();\n    try {\n        const images = await getPhotoBySearch(value, page);\n    \n        renderMoreImages(images);\n    \n        if (page > 1) {\n            hideLoader2();\n            checkBtnVisibleStatus();\n        };\n    } catch (error) {\n        console.log(error);\n    }\n});\n\nfunction endOfCollection () {\n    if (page === maxPage) {\n        hideLoader2();\n        checkBtnVisibleStatus();\n        iziToast.show({\n            message: `❌ \"We're sorry, but you've reached the end of search results.\"`,\n            color: 'red',\n            position: 'topRight',\n            maxWidth: '400px',\n        });\n    }\n}\n\nloadMoreBtn.addEventListener(\"click\", endOfCollection)\n\nfunction showMoreLoadBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\nfunction hideMoreLoadBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n      hideMoreLoadBtn();\n  \n  } else {\n    showMoreLoadBtn();\n  }\n}\n"],"names":["galleryEl","formElem","SimpleLightbox","options","renderImages","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","lightbox","renderMoreImages","images","height","getPhotoBySearch","value","currentPage","KEY","response","axios","error","loaderElem","loaderElem2","loadMoreBtn","page","maxPage","hideLoader","onSubmit","e","showLoader","data","renderError","checkBtnVisibleStatus","iziToast","showLoader2","hideLoader2","endOfCollection","showMoreLoadBtn","hideMoreLoadBtn"],"mappings":"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"}